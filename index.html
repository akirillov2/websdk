<!doctype html>
<html>
  <head>
    
    <!-- GTM Datalayer init -->
    <script>
    window.dataLayer = window.dataLayer || [];
    </script>
    
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-W8VSX4T');</script>
    <!-- End Google Tag Manager -->
    
    <title>People WebSDK with GTM</title>
  </head>
  <body>
    
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W8VSX4T"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    
    <p>People WebSDK test site</p>
       
    <form action="" method="get" class="login-form">
      <div class="login-form">
        <label for="email">User email: </label>
        <input type="text" name="email" id="email" required>
      </div>
      <div class="login-form">
        <input type="submit" value="Log In">
      </div>
    </form>
    
     <script>
      const onLoginFormSubmit = (evt) => {
        evt.preventDefault();
        const formData = new FormData(document.querySelector('.login-form'));
        const formEmail = formData.get('email');
        
        window.dataLayer.push({'user_id': formEmail, 'event': 'login'});
      };

      const loginForm = document.querySelector('.login-form');
      loginForm.addEventListener('submit', onLoginFormSubmit);
    </script>
  </body>
</html>
